<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Data</title>
</head>
<body>
    <div id="data-container">
        <!-- Content will be dynamically inserted here -->
        <p>how to show data here</p>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Fetch data from the published Google Sheets URL using the fetch API
            fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQ_o-4pIE6HUsjRJfRFUNFhUjOeWvO_sfEZVLFFQglkJZCG3AT6WE2JiAVU8WiSLnCkfM3ZYn1ee34p/pub?gid=0&single=true&output=csv')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(data => {
                    // Handle and display the data on the page
                    displayDataOnPage(data);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        });

        function displayDataOnPage(data) {
            var rows = data.split('\n');
            var headers = rows[0].split(',');
            var content = '<table><thead><tr>';

            // Create table headers
            headers.forEach(function (header) {
                content += '<th>' + header + '</th>';
            });

            content += '</tr></thead><tbody>';

            // Loop through each row starting from index 1 to skip headers
            for (var i = 1; i < rows.length; i++) {
                var columns = rows[i].split(',');
                content += '<tr>';

                // Create table cells
                columns.forEach(function (column) {
                    content += '<td>' + column + '</td>';
                });

                content += '</tr>';
            }

            content += '</tbody></table>';

            ////////////////////////////////////////////////////////////
            // Assuming data is a CSV string
            // var rows = data.split('\n');
            // var content = '<p>';

            // // Loop through each row and append it to the content
            // rows.forEach(function (row) {
            //     var columns = row.split(',');
            //     content += '<h1>' + columns.join('</h1><h1>') + '</h1>';
            // });

            // content += '</p>';
            ////////////////////////////////////////////////////////////
            // Set the generated content to the div with id 'data-container'
            document.getElementById('data-container').innerHTML = content;
        }
    </script>
</body>
</html>
